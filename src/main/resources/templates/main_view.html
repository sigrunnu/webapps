<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="https://www.thymeleaf.org">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Social network</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="public/socialnetwork.css" />
    <script
      src="https://kit.fontawesome.com/3559a8c856.js"
      crossorigin="anonymous"
    ></script>
  </head>

  <body>
    <div class="container loginRegisterBody p-5">
      <div class="row mb-5">
        <div class="col-6">
          <h1>Social Media</h1>
          </div>
          <div class="col-6 profile">
          <i class="fas fa-user"></i>
          <a th:href="@{/user/{userId}(userId=${user.getId()})}" th:text="${user.getName()}">User name</a>
          <form th:action="@{/logout}" method="post">
            <button type="submit" class="btn btn-success logout-btn">
              Sign out
            </button>
          </form>
        </div>
      </div>
      <div class="row">
        <h2 class="col-12">Ãšltimas publicaciones</h2>
        <div class="publications col-12">
          <form th:action="@{/post}" th:object="${publication}" method="post">
            <div>
                <textarea th:field="*{text}" placeholder="Your publication text here" required></textarea>
            </div>
            <div>
                <label>
                    <input type="checkbox" th:field="*{restricted}">
                    For friends only
                </label>
            </div>
            <div><input type="submit" value="Post!"></div>
          </form>
          <div class="publication" th:each="publication : ${publications}">
            <div class="card">
              <div class="card-body">
                <div class="publication_meta">
                 
                    <a 
                    class="user"
                    th:href="@{/user/{id}(id=${publication.getUser().getId()})}"
                    th:text="${publication.getUser().getName()}">Pepe</a>
                    
                  <span
                    class="publication_restricted"
                    th:if="${publication.isRestricted()}"
                    >restricted</span
                  >
                  <span
                    class="publication_public"
                    th:if="${!publication.isRestricted()}"
                    >public</span
                  >
                  <span
                    class="timestamp"
                    th:text="${publication.getTimestamp()}"
                    >15 de marzo de 2021</span
                  >
                </div>
                <div
                  class="publication_text"
                  th:text="${publication.getText()}"
                >
                  El texto del mensaje
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
